# Qwiz

[![Python](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/)
[![Aiogram](https://img.shields.io/badge/aiogram-3.x-2CA5E0.svg)](https://docs.aiogram.dev/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-%23336791)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-cache-%23D82C20)](https://redis.io/)
[![Docker](https://img.shields.io/badge/Docker-ready-2496ED)](https://www.docker.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Tests](https://img.shields.io/badge/tests-pytest-blueviolet)](./tests)

Quizletâ€‘like Telegramâ€‘Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº.  
ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ (CSV) Ð¸ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ Ð´Ñ€ÑƒÐ·ÐµÐ¹ (ÐºÐ¾Ð´), Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð² **Ð¾Ð´Ð¸Ð½Ð¾Ñ‡Ð½Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ**, Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ **Ð¾Ð½Ð»Ð°Ð¹Ð½ Ñ Ð´Ñ€ÑƒÐ·ÑŒÑÐ¼Ð¸**, ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð³Ñ€Ñ‹ Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ **AIâ€‘Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸** Ð¿Ð¾ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼.

---

## ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- **ÐšÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐµÐº**
  - Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¸Ð· CSV / Ð¿Ð¾ ÐºÐ¾Ð´Ñƒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸ Ð¿Ñ€ÑÐ¼Ð¾ Ð² Telegram
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¹ Ð½Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
  - Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð´ÑƒÐ±Ð»ÐµÐ¹ Ð¸ Ð±Ð°Ð·Ð¾Ð²Ð°Ñ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
- **ÐžÐ´Ð¸Ð½Ð¾Ñ‡Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼**
  - ÐŸÐ¾ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ Ð¿Ð¾ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼ Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ°
  - ÐŸÐ¾Ð´ÑÑ‡Ñ‘Ñ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ (ÐºÐ¾Ð»-Ð²Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð², Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸ Ñ‚.Ð´.)
  - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐºÐ½Ð¾Ð¿Ð¾Ðº ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ (ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ, Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚, Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ Ð¸ Ð¿Ñ€.)
- **ÐžÐ½Ð»Ð°Ð¹Ð½â€‘Ð¸Ð³Ñ€Ð°**
  - Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹ Ð¸ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
  - Ð¡Ð¾Ð²Ð¼ÐµÑÑ‚Ð½Ð°Ñ Ð¸Ð³Ñ€Ð° Ð¿Ð¾ Ð¾Ð´Ð½Ð¾Ð¹ Ð¸ Ñ‚Ð¾Ð¹ Ð¶Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸
  - Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð¾Ð¹, ÑÐ¼ÐµÐ½Ð° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº, Ð²Ñ‹Ñ…Ð¾Ð´ / Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ
- **ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð¾Ñ‚ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸**
  - Ð¡ÐµÑ€Ð²Ð¸Ñ `neuralnet` Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¼ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð¼
  - Ð›ÐµÐ³ÐºÐ¾Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸
  - HTTPâ€‘API Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð¿Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑƒ / Ð¾Ñ‚Ð²ÐµÑ‚Ñƒ
- **ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ**
  - ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¸Ð¼ÐµÐ½Ð¸ Ð¸ Ð±Ð°Ð·Ð¾Ð²Ð¾Ð¹ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
  - Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÐ¼Ð¾Ðµ Ð¸Ð¼Ñ
- **Ð˜Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°**
  - ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ð¹ ÑÑ‚ÐµÐº: `aiogram`, `asyncpg`, `redis`
  - ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð‘Ð” Ñ‡ÐµÑ€ÐµÐ· `alembic`
  - Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ `Makefile` Ð¸ `docker-compose.yml` Ð´Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð²ÑÐµÐ³Ð¾ ÑÑ‚ÐµÐ½Ð´Ð°

---

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸:

```bash
Qwiz/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ handlers/      # Telegramâ€‘Ñ…ÐµÐ½Ð´Ð»ÐµÑ€Ñ‹ (solo, online, collections, user)
â”‚   â”œâ”€â”€ keyboards/     # ÐšÐ»Ð°Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ñ‹ (Reply / Inline)
â”‚   â”œâ”€â”€ models/        # SQLAlchemyâ€‘Ð¼Ð¾Ð´ÐµÐ»Ð¸ (User, Collection, Items, SoloSession, ...)
â”‚   â”œâ”€â”€ repos/         # Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ð¾Ð²ÐµÑ€Ñ… Ð‘Ð”
â”‚   â”œâ”€â”€ services/      # Ð‘Ð¸Ð·Ð½ÐµÑâ€‘Ð»Ð¾Ð³Ð¸ÐºÐ° (solo/online mode, Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸, Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚, Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ)
â”‚   â”œâ”€â”€ filters/       # Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð´Ð»Ñ aiogram (pending actions Ð¸ Ñ‚.Ð´.)
â”‚   â”œâ”€â”€ middlewares/   # Middleware (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, RedisKV)
â”‚   â””â”€â”€ texts/         # Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð² Ð´Ð»Ñ Telegram
â”œâ”€â”€ alembic/           # ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ ÑÑ…ÐµÐ¼Ñ‹ PostgreSQL
â”œâ”€â”€ config/            # ÐšÐ¾Ð½Ñ„Ð¸Ð³Ð¸, .env ÑˆÐ°Ð±Ð»Ð¾Ð½, pytest.ini, alembic.ini
â”œâ”€â”€ infra/             # Dockerfileâ€™Ñ‹, docker-compose, Makefile
â”œâ”€â”€ tests/             # Unit / integration / e2e Ñ‚ÐµÑÑ‚Ñ‹
â”œâ”€â”€ main.py            # Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°: Ð·Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
â”œâ”€â”€ pyproject.toml     # Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
â””â”€â”€ LICENSE
```

### ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹

- **Telegramâ€‘Ð±Ð¾Ñ‚**  
  Ð ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½ Ð½Ð° `aiogram 3.x`. Ð’ `main.py` ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ÑÑ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· `create_app`, Ð½Ð°ÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ÑÑ `Dispatcher`, Ð±Ð¾Ñ‚, Redisâ€‘ÐºÐ»Ð¸ÐµÐ½Ñ‚ Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð‘Ð”.

- **Ð¥Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…**
  - PostgreSQL + SQLAlchemy
  - [ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸](alembic/versions/)

- **Redis**
  - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ ÐºÐ°Ðº [KVâ€‘Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð¸ ÐºÑÑˆ](app/services/redis_kv.py)
  - Ð¥Ñ€Ð°Ð½Ð¸Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ (pending Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ, Ñ‚ÐµÐºÑƒÑ‰Ð°Ñ ÑÐµÑÑÐ¸Ñ Ð¸ Ñ‚.Ð¿.)

- **Neuralnetâ€‘ÑÐµÑ€Ð²Ð¸Ñ**
  - ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ [ÑÐµÑ€Ð²Ð¸Ñ](infra/Dockerfile.neural)
  - HTTPâ€‘API (`neuralnet.model:app` Ð¿Ð¾Ð´ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼ `uvicorn`)
  - Ð’Ñ‹Ð·Ð¾Ð²Ñ‹ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð¾Ðº [Ð¸Ð½ÐºÐ°Ð¿ÑÑƒÐ»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹](app/services/hints.py)

---

## Ð—Ð°Ð¿ÑƒÑÐº Ñ‡ÐµÑ€ÐµÐ· Docker

Ð’ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ ÐµÑÑ‚ÑŒ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ [Makefile](infra/Makefile), ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚:

- `db`      â€” PostgreSQL
- `redis`   â€” Redis
- `neuralnet` â€” ÑÐµÑ€Ð²Ð¸Ñ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð¾Ðº
- `bot`     â€” ÑÐ°Ð¼ Telegramâ€‘Ð±Ð¾Ñ‚

### ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÐ³Ð¾ ÑÑ‚ÐµÐ½Ð´Ð°

1. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `.env`:

   ```bash
   cp config/.env.template config/.env
   # Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ BOT_TOKEN Ð¸ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ DSN'Ñ‹
   ```

2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Makefile:

   ```bash
   cd infra
   make full
   ```

3. ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ð° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð² Ð±Ð¾Ñ‚ Ð½Ð°Ñ‡Ð½Ñ‘Ñ‚ polling Telegram API.

---

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ (Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð±ÐµÐ· Docker)

### 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```bash
git clone git@github.com:vladislavovichi/Qwiz.git
cd Qwiz
```

### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ **poetry**.

```bash
poetry install
```

Ð•ÑÐ»Ð¸ poetry ÐµÑ‰Ñ‘ Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½:

```bash
pip install "poetry>=2.2.1,<3.0.0"
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ [`config/`](config/) ÐµÑÑ‚ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½ [`.env.template`](config/.env.template):

```bash
cp config/.env.template config/.env
```

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `config/.env` Ð¿Ð¾Ð´ ÑÐµÐ±Ñ:

```dotenv
BOT_TOKEN=123:abc-def           # Ð¢Ð¾ÐºÐµÐ½ Telegramâ€‘Ð±Ð¾Ñ‚Ð° Ð¾Ñ‚ @BotFather
DB_DSN=postgresql+asyncpg://... # DSN Ðº PostgreSQL
REDIS_DSN=redis://localhost:6379/0
REDIS_PREFIX=tgquiz
REDIS_TTL_SEC=900
NEURALNET_URL=http://localhost:8000
```

### 4. ÐŸÐ¾Ð´Ð½ÑÑ‚ÑŒ Ð‘Ð” Ð¸ Redis Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾

Ð¡Ð°Ð¼Ñ‹Ð¹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¿ÑƒÑ‚ÑŒ â€” Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Docker (Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð½Ðµ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ).

```bash
docker compose -f infra/docker-compose.yml up -d db redis
```

### 5. ÐŸÑ€Ð¾Ð³Ð½Ð°Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸

```bash
alembic upgrade head
```

(Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ `alembic.ini` ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚ Ð½Ð° Ñ‚Ð¾Ñ‚ Ð¶Ðµ DSN, Ñ‡Ñ‚Ð¾ Ð¸ Ð² `config/.env`.)

### 6. Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°

```bash
poetry run python main.py
```

Ð’ Ð»Ð¾Ð³Ð°Ñ… Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ `Starting polling...` â€” Ð±Ð¾Ñ‚ Ð³Ð¾Ñ‚Ð¾Ð² Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ð°Ð¿Ð´ÐµÐ¹Ñ‚Ñ‹.

---

## Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑÐ¼Ð¸

ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‚Ð¾Ðº Ð´Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ:

1. ÐÐ°Ð¶Ð°Ñ‚ÑŒ ÐºÐ½Ð¾Ð¿ÐºÑƒ **Â«ðŸ‘€ ÐœÐ¾Ð¸ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸Â»**
2. ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ CSV Ð¸Ð»Ð¸ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ñ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ°Ð¼Ð¸
3. Ð”Ð¾Ð¶Ð´Ð°Ñ‚ÑŒÑÑ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð¸ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½ÑƒÐ¶Ð½ÑƒÑŽ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ Ð² solo Ð¸Ð»Ð¸ Ð¾Ð½Ð»Ð°Ð¹Ð½â€‘Ñ€ÐµÐ¶Ð¸Ð¼Ðµ

### Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ CSV

ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ Ð¾Ð¶Ð¸Ð´Ð°ÑŽÑ‚ ÐºÐ¾Ð»Ð¾Ð½ÐºÐ¸ Ð²Ð¸Ð´Ð°:

- `title` / `collection` â€” Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸
- `question` / `q`
- `answer` / `a`

ÐŸÑ€Ð¸Ð¼ÐµÑ€:

```csv
title,question,answer
Biology,What is DNA?,Deoxyribonucleic acid
Biology,What carries oxygen in blood?,Hemoglobin
```

---

## Ð ÐµÐ¶Ð¸Ð¼Ñ‹ Ð¸Ð³Ñ€Ñ‹

### Soloâ€‘Ñ€ÐµÐ¶Ð¸Ð¼

- Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ **Â«ðŸŽ® Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ Ð¾Ð´Ð½Ð¾Ð¼ÑƒÂ»**
- Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ÑÑ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ `SoloSession`
- ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð² Ð‘Ð” Ð¸ Redis
- ÐµÑÑ‚ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ¾Ð¼, Ð¿Ð¾Ð´ÑÑ‡Ñ‘Ñ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¸ Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸

### ÐžÐ½Ð»Ð°Ð¹Ð½â€‘Ð¸Ð³Ñ€Ð°

- ÑÐ¾Ð·Ð´Ð°Ñ‘Ñ‚ÑÑ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð° (room), Ðº ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸
- Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº, Ð²Ñ‹Ð±Ð¾Ñ€ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ð¸, Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹
- ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐºÐµÑˆÐ¸Ñ€ÑƒÑŽÑ‚ÑÑ Ð² Redis

---

## ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸

ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹ ÐºÐ°Ðº Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ HTTPâ€‘ÑÐµÑ€Ð²Ð¸Ñ `neuralnet`
- endpoint: `POST /neuralnet/model`
- ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· `NEURALNET_URL` Ð¸ `HINT_ENDPOINT` Ð² [`Dockerfile.neural`](infra/Dockerfile.neural)

ÐšÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ð½Ð° ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ Ð±Ð¾Ñ‚Ð°

- ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ payload (Ð²Ð¾Ð¿Ñ€Ð¾Ñ, Ð¾Ñ‚Ð²ÐµÑ‚, Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸)
- Ð´ÐµÐ»Ð°ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ðº `HINT_ENDPOINT`
- Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð¸Ð»Ð¸ Ð¿ÑƒÑÑ‚ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ

---
